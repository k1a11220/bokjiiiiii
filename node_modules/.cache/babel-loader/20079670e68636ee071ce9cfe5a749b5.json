{"ast":null,"code":"import _regeneratorRuntime from\"/Users/son/Documents/GitHub/bokjiiiiii/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/son/Documents/GitHub/bokjiiiiii/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/son/Documents/GitHub/bokjiiiiii/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"/Users/son/Documents/GitHub/bokjiiiiii/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState}from\"react\";import axios from\"axios\";import XMLParser from\"react-xml-parser\";import{useForm}from\"react-hook-form\";import{CircularProgress}from\"@material-ui/core\";import\"./styles.css\";import ResultList from\"./components/ResultList\";function App(){function parseStr(_x){return _parseStr.apply(this,arguments);}function _parseStr(){_parseStr=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dataSet){var dataArr;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dataArr=new XMLParser().parseFromString(dataSet).children;resultCount=dataArr.length;// 검색된 데이터의 수를 구한다. (dataArr length 에서 5개 값이 빠짐)\n// console.log(dataArr);\nif(resultCount<5){alert(\"검색결과가 없습니다.\");// 검색결과가 없을경우 알람표시\nsetPrint(false);setLoaded(false);}setState(function(preState){return _objectSpread(_objectSpread({},preState),{},{results:dataArr.slice(5,resultCount)});});setLoaded(false);setPrint(true);// console.log(state.results); //state.result == servs\ncase 6:case\"end\":return _context.stop();}}},_callee);}));return _parseStr.apply(this,arguments);}function getAPI(){return _getAPI.apply(this,arguments);}function _getAPI(){_getAPI=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios({method:\"get\",url:\"https://cors-anywhere.herokuapp.com/http://apis.data.go.kr/B554287/NationalWelfareInformations/NationalWelfarelist?serviceKey=\".concat(API_KEY,\"&callTp=L&pageNo=1&numOfRows=10&lifeArray=\").concat(LIFE_VALUE,\"&charTrgterArray=\").concat(CHAR_VALUE,\"&desireArr=\").concat(DESIRE_VALUE,\"&srchKeyCode=001\")}).then(function(response){var dataSet=response.data;parseStr(dataSet);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _getAPI.apply(this,arguments);}var API_KEY=\"qt%2BHSez0GjoTYvzN9D49cDlbHcVmSSxlKAUmIrLEqtHhnJBf6URyeHVJYuTIP13Hm148dCo3U7qu0QeSF%2FXoZw%3D%3D\";var LIFE_VALUE=\"\";var CHAR_VALUE=\"\";// let INDVD_VALUE = \"\";\nvar DESIRE_VALUE=\"\";var resultCount=[];// let resultNumber = 4; //최상위 3개의 데이터는 필요없기 떄문에 제외한다.\nvar _useState=useState({results:[]}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];//api 데이터를 담는 hooks\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loaded=_useState4[0],setLoaded=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),print=_useState6[0],setPrint=_useState6[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit;var onSubmit=function onSubmit(data){LIFE_VALUE=data.lifeArr;CHAR_VALUE=data.charTrgterArray;// INDVD_VALUE = data.indvdArr;\nDESIRE_VALUE=data.desireArr;setLoaded(true);getAPI();};// console.log(state.results);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",children:[/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"BBOKJI\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\uB098\\uB9CC\\uC744 \\uC704\\uD55C \\uBCF5\\uC9C0\\uAC80\\uC0C9\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"select-wrapper\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"select-container\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"select-area\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"option-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"option-title\",children:\"\\uC0DD\\uC560\\uC8FC\\uAE30\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"lifeArr\",ref:register,className:\"js-life\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"none\",children:\"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"}),/*#__PURE__*/_jsx(\"option\",{value:\"001\",children:\"\\uC601\\uC720\\uC544\"}),/*#__PURE__*/_jsx(\"option\",{value:\"002\",children:\"\\uC544\\uB3D9\"}),/*#__PURE__*/_jsx(\"option\",{value:\"003\",children:\"\\uCCAD\\uC18C\\uB144\"}),/*#__PURE__*/_jsx(\"option\",{value:\"004\",children:\"\\uCCAD\\uB144\"}),/*#__PURE__*/_jsx(\"option\",{value:\"005\",children:\"\\uC911\\uC7A5\\uB144\"}),/*#__PURE__*/_jsx(\"option\",{value:\"006\",children:\"\\uB178\\uB144\"}),/*#__PURE__*/_jsx(\"option\",{value:\"007\",children:\"\\uC784\\uC2E0 \\xB7 \\uCD9C\\uC0B0\"})]})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"option-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"option-title\",children:\"\\uB300\\uC0C1\\uD2B9\\uC131\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"charTrgterArray\",ref:register,className:\"js-char\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"none\",children:\"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"}),/*#__PURE__*/_jsx(\"option\",{value:\"001\",children:\"\\uD574\\uB2F9\\uC5C6\\uC74C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"002\",children:\"\\uC7A5\\uC560\\uC778\"}),/*#__PURE__*/_jsx(\"option\",{value:\"003\",children:\"\\uAD6D\\uAC00\\uC720\\uACF5\\uC790 \\uB4F1 \\uBCF4\\uD6C8\\uB300\\uC0C1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"004\",children:\"\\uC758\\uC0AC\\uC0C1\\uC790\"}),/*#__PURE__*/_jsx(\"option\",{value:\"005\",children:\"\\uC2E0\\uC6A9\\uBD88\\uB7C9\\uC790\"}),/*#__PURE__*/_jsx(\"option\",{value:\"006\",children:\"\\uBB34\\uC8FC\\uD0DD\\uC790\"}),/*#__PURE__*/_jsx(\"option\",{value:\"007\",children:\"\\uC784\\uC0B0\\uBD80\"}),/*#__PURE__*/_jsx(\"option\",{value:\"008\",children:\"\\uB09C\\uC784.\\uBD88\\uC784 \\uBD80\\uBD80\"}),/*#__PURE__*/_jsx(\"option\",{value:\"009\",children:\"\\uB3C5\\uAC70\\uB178\\uC778\"}),/*#__PURE__*/_jsx(\"option\",{value:\"010\",children:\"\\uB178\\uC219\\uC778\"}),/*#__PURE__*/_jsx(\"option\",{value:\"011\",children:\"\\uC5EC\\uC131\"}),/*#__PURE__*/_jsx(\"option\",{value:\"012\",children:\"\\uC800\\uC18C\\uB4DD\\uCE35\"}),/*#__PURE__*/_jsx(\"option\",{value:\"013\",children:\"\\uCDE8\\uC57D\\uACC4\\uCE35\"}),/*#__PURE__*/_jsx(\"option\",{value:\"014\",children:\"\\uC2E4\\uC5C5\\uC790(\\uCDE8\\uC5C5\\uD76C\\uB9DD\\uC790)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"015\",children:\"\\uCDE8\\uC57D\\uACC4\\uCE35\"}),/*#__PURE__*/_jsx(\"option\",{value:\"016\",children:\"\\uC7A5\\uC560\\uC778\"}),/*#__PURE__*/_jsx(\"option\",{value:\"017\",children:\"\\uB18D\\uC5B4\\uC5C5\\uC778\"}),/*#__PURE__*/_jsx(\"option\",{value:\"018\",children:\"\\uD559\\uC0DD(\\uCD08\\uB4F1)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"019\",children:\"\\uD559\\uC0DD(\\uC911\\xB7\\uACE0\\uB4F1\\uD559\\uAD50)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"020\",children:\"\\uD559\\uC0DD(\\uB300\\uD559\\uC0DD \\uC774\\uC0C1)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"021\",children:\"\\uBBF8\\uCDE8\\uD559\"}),/*#__PURE__*/_jsx(\"option\",{value:\"022\",children:\"\\uD55C\\uBD80\\uBAA8\\uAC00\\uAD6C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"023\",children:\"\\uC18C\\uB144\\uC18C\\uB140\\uAC00\\uC7A5\\uAC00\\uAD6C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"024\",children:\"\\uB2E4\\uBB38\\uD654\\uAC00\\uAD6C\"})]})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"option-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"option-title\",children:\"\\uBAA9\\uC801\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"desireArr\",ref:register,className:\"js-desire\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"none\",children:\"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"}),/*#__PURE__*/_jsx(\"option\",{value:\"100\",children:\"\\uC77C\\uC790\\uB9AC\"}),/*#__PURE__*/_jsx(\"option\",{value:\"110\",children:\"\\uC8FC\\uAC70\"}),/*#__PURE__*/_jsx(\"option\",{value:\"120\",children:\"\\uC77C\\uC0C1\\uC0DD\\uD65C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"130\",children:\"\\uC2E0\\uCCB4\\uAC74\\uAC15 \\uBC0F \\uBCF4\\uAC74\\uC758\\uB8CC\"}),/*#__PURE__*/_jsx(\"option\",{value:\"140\",children:\"\\uC815\\uC2E0\\uAC74\\uAC15 \\uBC0F \\uC2EC\\uB9AC\\uC815\\uC11C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"150\",children:\"\\uBCF4\\uD638 \\uBC0F \\uB3CC\\uBD04\\xB7\\uC694\\uC591\"}),/*#__PURE__*/_jsx(\"option\",{value:\"160\",children:\"\\uBCF4\\uC721 \\uBC0F \\uAD50\\uC721\"}),/*#__PURE__*/_jsx(\"option\",{value:\"170\",children:\"\\uBB38\\uD654 \\uBC0F \\uC5EC\\uAC00\"}),/*#__PURE__*/_jsx(\"option\",{value:\"180\",children:\"\\uC548\\uC804 \\uBC0F \\uAD8C\\uC775\\uBCF4\\uC7A5\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"submitBtn\",type:\"submit\",value:\"\\uACB0\\uACFC\\uBCF4\\uAE30\"}),/*#__PURE__*/_jsx(\"input\",{className:\"resetBtn\",type:\"reset\",value:\"\\uCD08\\uAE30\\uD654\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"js-result\",children:/*#__PURE__*/_jsx(\"h2\",{children:print===true?\"지원 가능한 서비스를 살펴보세요.\":\"서비스를 조회해보세요.\"})}),loaded===true?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(CircularProgress,{className:\"spinner\",getdata:toString(state.getdata)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}):null,/*#__PURE__*/_jsx(ResultList,{results:state.results})]}),/*#__PURE__*/_jsxs(\"footer\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"\\xA9 2021 \\uACF5\\uC0AC\\uB2E8\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]})]});}export default App;","map":{"version":3,"sources":["/Users/son/Documents/GitHub/bokjiiiiii/src/App.js"],"names":["React","useState","axios","XMLParser","useForm","CircularProgress","ResultList","App","parseStr","dataSet","dataArr","parseFromString","children","resultCount","length","alert","setPrint","setLoaded","setState","preState","results","slice","getAPI","method","url","API_KEY","LIFE_VALUE","CHAR_VALUE","DESIRE_VALUE","then","response","data","state","loaded","print","register","handleSubmit","onSubmit","lifeArr","charTrgterArray","desireArr","toString","getdata"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport XMLParser from \"react-xml-parser\";\nimport { useForm } from \"react-hook-form\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport \"./styles.css\";\nimport ResultList from \"./components/ResultList\";\n\nfunction App() {\n  async function parseStr(dataSet) {\n    const dataArr = new XMLParser().parseFromString(dataSet).children;\n    resultCount = dataArr.length; // 검색된 데이터의 수를 구한다. (dataArr length 에서 5개 값이 빠짐)\n    // console.log(dataArr);\n    if (resultCount < 5) {\n      alert(\"검색결과가 없습니다.\"); // 검색결과가 없을경우 알람표시\n      setPrint(false);\n      setLoaded(false);\n    }\n    setState((preState) => {\n      return {\n        ...preState,\n        results: dataArr.slice(5, resultCount),\n      };\n    });\n    setLoaded(false);\n    setPrint(true);\n    // console.log(state.results); //state.result == servs\n  }\n\n  async function getAPI() {\n    await axios({\n      method: \"get\",\n      url: `https://cors-anywhere.herokuapp.com/http://apis.data.go.kr/B554287/NationalWelfareInformations/NationalWelfarelist?serviceKey=${API_KEY}&callTp=L&pageNo=1&numOfRows=10&lifeArray=${LIFE_VALUE}&charTrgterArray=${CHAR_VALUE}&desireArr=${DESIRE_VALUE}&srchKeyCode=001`,\n    }).then(function (response) {\n      const dataSet = response.data;\n      parseStr(dataSet);\n    });\n  }\n\n  const API_KEY =\n    \"qt%2BHSez0GjoTYvzN9D49cDlbHcVmSSxlKAUmIrLEqtHhnJBf6URyeHVJYuTIP13Hm148dCo3U7qu0QeSF%2FXoZw%3D%3D\";\n\n  let LIFE_VALUE = \"\";\n  let CHAR_VALUE = \"\";\n  // let INDVD_VALUE = \"\";\n  let DESIRE_VALUE = \"\";\n  let resultCount = [];\n  // let resultNumber = 4; //최상위 3개의 데이터는 필요없기 떄문에 제외한다.\n\n  const [state, setState] = useState({\n    results: [],\n  }); //api 데이터를 담는 hooks\n\n  const [loaded, setLoaded] = useState(false);\n  const [print, setPrint] = useState(false);\n\n  const { register, handleSubmit } = useForm();\n  const onSubmit = (data) => {\n    LIFE_VALUE = data.lifeArr;\n    CHAR_VALUE = data.charTrgterArray;\n    // INDVD_VALUE = data.indvdArr;\n    DESIRE_VALUE = data.desireArr;\n    setLoaded(true);\n    getAPI();\n  };\n  // console.log(state.results);\n  return (\n    <div className=\"wrapper\">\n      <>\n        <header>\n          <h1>BBOKJI</h1>\n          <h2>나만을 위한 복지검색</h2>\n        </header>\n\n        <form className=\"select-wrapper\" onSubmit={handleSubmit(onSubmit)}>\n          <div className=\"select-container\">\n            <ul className=\"select-area\">\n              <li className=\"option-container\">\n                <h2 className=\"option-title\">생애주기</h2>\n                <select name=\"lifeArr\" ref={register} className=\"js-life\">\n                  <option value=\"none\">선택하세요</option>\n                  <option value=\"001\">영유아</option>\n                  <option value=\"002\">아동</option>\n                  <option value=\"003\">청소년</option>\n                  <option value=\"004\">청년</option>\n                  <option value=\"005\">중장년</option>\n                  <option value=\"006\">노년</option>\n                  <option value=\"007\">임신 · 출산</option>\n                </select>\n              </li>\n\n              <li className=\"option-container\">\n                <h2 className=\"option-title\">대상특성</h2>\n                <select\n                  name=\"charTrgterArray\"\n                  ref={register}\n                  className=\"js-char\"\n                >\n                  <option value=\"none\">선택하세요</option>\n                  <option value=\"001\">해당없음</option>\n                  <option value=\"002\">장애인</option>\n                  <option value=\"003\">국가유공자 등 보훈대상</option>\n                  <option value=\"004\">의사상자</option>\n                  <option value=\"005\">신용불량자</option>\n                  <option value=\"006\">무주택자</option>\n                  <option value=\"007\">임산부</option>\n                  <option value=\"008\">난임.불임 부부</option>\n                  <option value=\"009\">독거노인</option>\n                  <option value=\"010\">노숙인</option>\n                  <option value=\"011\">여성</option>\n                  <option value=\"012\">저소득층</option>\n                  <option value=\"013\">취약계층</option>\n                  <option value=\"014\">실업자(취업희망자)</option>\n                  <option value=\"015\">취약계층</option>\n                  <option value=\"016\">장애인</option>\n                  <option value=\"017\">농어업인</option>\n                  <option value=\"018\">학생(초등)</option>\n                  <option value=\"019\">학생(중·고등학교)</option>\n                  <option value=\"020\">학생(대학생 이상)</option>\n                  <option value=\"021\">미취학</option>\n                  <option value=\"022\">한부모가구</option>\n                  <option value=\"023\">소년소녀가장가구</option>\n                  <option value=\"024\">다문화가구</option>\n                </select>\n              </li>\n\n              {/* <li className=\"option-container\">\n                <h2 className=\"option-title\">가구유형</h2>\n                <select name=\"indvdArr\" ref={register} className=\"js-indvd\">\n                  <option value=\"none\">선택하세요</option>\n                  <option value=\"001\">해당없음</option>\n                  <option value=\"002\">한부모</option>\n                  <option value=\"003\">다문화</option>\n                  <option value=\"004\">조손</option>\n                  <option value=\"005\">새터민</option>\n                  <option value=\"006\">소년소녀가장</option>\n                  <option value=\"007\">독거노인</option>\n                </select>\n              </li> */}\n\n              <li className=\"option-container\">\n                <h2 className=\"option-title\">목적</h2>\n                <select name=\"desireArr\" ref={register} className=\"js-desire\">\n                  <option value=\"none\">선택하세요</option>\n                  <option value=\"100\">일자리</option>\n                  <option value=\"110\">주거</option>\n                  <option value=\"120\">일상생활</option>\n                  <option value=\"130\">신체건강 및 보건의료</option>\n                  <option value=\"140\">정신건강 및 심리정서</option>\n                  <option value=\"150\">보호 및 돌봄·요양</option>\n                  <option value=\"160\">보육 및 교육</option>\n                  <option value=\"170\">문화 및 여가</option>\n                  <option value=\"180\">안전 및 권익보장</option>\n                </select>\n              </li>\n            </ul>\n          </div>\n          <div className=\"search-container\">\n            <input className=\"submitBtn\" type=\"submit\" value=\"결과보기\" />\n            <input className=\"resetBtn\" type=\"reset\" value=\"초기화\" />\n          </div>\n        </form>\n        <div className=\"js-result\">\n          <h2>\n            {print === true\n              ? \"지원 가능한 서비스를 살펴보세요.\"\n              : \"서비스를 조회해보세요.\"}\n          </h2>\n        </div>\n\n        {loaded === true ? (\n          <>\n            <br />\n            <br />\n            <br />\n            <CircularProgress\n              className=\"spinner\"\n              getdata={toString(state.getdata)}\n            />\n            <br />\n            <br />\n          </>\n        ) : null}\n\n        <ResultList results={state.results} />\n      </>\n      <footer>\n        <br />\n        <br />\n        <br />\n        <h4>&copy; 2021 공사단</h4>\n        <br />\n        <br />\n        <br />\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}